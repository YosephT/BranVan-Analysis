{"filter":false,"title":"application_helper.rb","tooltip":"/app/helpers/application_helper.rb","undoManager":{"mark":7,"position":7,"stack":[[{"start":{"row":0,"column":24},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":2},{"start":{"row":1,"column":0},"end":{"row":1,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":1,"column":4},"end":{"row":2,"column":0},"action":"insert","lines":["",""],"id":3},{"start":{"row":2,"column":0},"end":{"row":2,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":2,"column":4},"end":{"row":3,"column":0},"action":"insert","lines":["",""],"id":4},{"start":{"row":3,"column":0},"end":{"row":3,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":2,"column":4},"end":{"row":3,"column":0},"action":"insert","lines":["",""],"id":5},{"start":{"row":3,"column":0},"end":{"row":3,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":3,"column":4},"end":{"row":4,"column":0},"action":"insert","lines":["",""],"id":6},{"start":{"row":4,"column":0},"end":{"row":4,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":4,"column":4},"end":{"row":5,"column":0},"action":"insert","lines":["",""],"id":7},{"start":{"row":5,"column":0},"end":{"row":5,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":2,"column":4},"end":{"row":63,"column":0},"action":"insert","lines":["    def self.parse_our_json","        require 'json'","        counter = 0","    ","        File.foreach('SeedFile.json') do |line|","        ","        \tr_id = nil","        \tc_s_id = nil","        \thead = nil","        \tv_id = nil","        \tlat = nil","        \tlongit = nil","        \tsp = nil","        \tts = nil","        \tparsed = JSON.parse(line)","        \tif (parsed[\"call_name\"]== \"52\")","        \t\tputs parsed[\"id\"]","        \t\tparsed.keys.each_with_index do |key, index|","        \t\t\tif key == \"id\"","        \t\t\t\tv_id = parsed[\"id\"]","        \t\t\telsif key == \"current_stop_id\"","        \t\t\t\tc_s_id = parsed[\"current_stop_id\"]","        \t\t\telsif key == \"heading\"","        \t\t\t\thead = parsed[\"heading\"]","        \t\t\telsif key == \"position\"","        \t\t\t\tlat =parsed[\"position\"][0]","        \t\t\t\tlongit = parsed[\"position\"][1]","        \t\t\telsif key == \"speed\"","        \t\t\t\tsp = parsed[\"speed\"]","        \t\t\telsif key == \"timestamp\"","        \t\t\t\tts = parsed[\"timestamp\"]/1000","        \t\t\t\tts = Time.at(ts).min","        \t\t\t\tif ts > 30","        \t\t\t\t\tts = ts-30","        \t\t\t\tend","        \t\t\tend","        \t\tend","        \tend","        ","        \tif (c_s_id != nil) ","        \t\tif Stop.where(:stop_id => c_s_id).first != nil","        \t\t\tminute = ts","        \t\t\tcurrent_stop = Stop.where(:stop_id => c_s_id).first","        \t\t\tif current_stop.avgTime != nil","        \t\t\t\tputs current_stop.avgTime","        \t\t\t\tputs minute","        \t\t\t\tatime = (current_stop.avgTime+minute)/2","        \t\t\t\tcurrent_stop.update(avgTime: atime)","        \t\t\t\tputs \"The Current ATIME is\"","        \t\t\t\tputs atime","        \t\t\telse","        \t\t\t\tcurrent_stop.update(avgTime: minute)","        \t\t\tend","        \t\telse","        \t\t\tputs \"No Record\"","        \t\tend","        \tend","        \t","        \tvehicle = VehicleReading.create(current_stop_id: c_s_id, heading: head, vehicle_id: v_id, latitude: lat, longitude: longit, speed: sp, timestamp: ts)","        end","    end",""],"id":8}],[{"start":{"row":2,"column":4},"end":{"row":2,"column":8},"action":"remove","lines":["    "],"id":9}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":2,"column":4},"end":{"row":2,"column":4},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1447600253856,"hash":"732a18e178da69248a5f71fa5a4cf3973bbe0f40"}